---
import { Check, X } from 'lucide-react';
import { plans } from '../../data/plans';
import { siteConfig } from '../../data/siteConfig';
import { formatWhatsAppLink } from '../../utils/helpers';

const features = [
  { name: 'Sesiones estratégicas', starter: '1/mes', growth: '2/mes', elite: 'Ilimitadas' },
  { name: 'Plan de marketing', starter: 'Básico', growth: 'Avanzado', elite: 'Integral' },
  { name: 'Capacitación de equipo', starter: false, growth: true, elite: true },
  { name: 'Implementación CRM', starter: false, growth: true, elite: true },
  { name: 'Automatizaciones', starter: false, growth: true, elite: true },
  { name: 'Análisis de métricas', starter: 'Básico', growth: 'Detallado', elite: 'Avanzado' },
  { name: 'Soporte', starter: 'WhatsApp', growth: 'Prioritario', elite: '24/7 Dedicado' },
  { name: 'Rediseño de procesos', starter: false, growth: false, elite: true },
  { name: 'Consultoría expansión', starter: false, growth: false, elite: true },
  { name: 'Acceso a Virginia', starter: false, growth: false, elite: 'Directo' }
];
---

<style>
  /* Responsive table container */
  .overflow-x-auto {
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
  }
  table {
    min-width: 600px;
  }
  @media (max-width: 768px) {
    table {
      min-width: 520px;
      font-size: 0.92rem;
    }
    th, td {
      padding-left: 0.5rem !important;
      padding-right: 0.5rem !important;
      padding-top: 0.75rem !important;
      padding-bottom: 0.75rem !important;
    }
    thead th, tfoot td {
      font-size: 0.98rem;
    }
    .overflow-x-auto {
      border-radius: 0.75rem;
      box-shadow: 0 2px 12px rgba(41,74,95,0.08);
      background: #fff;
    }
  }
</style>

<div class="overflow-x-auto">
  <table class="w-full bg-white rounded-xl shadow-lg overflow-hidden">
    <thead class="bg-azul-profundo text-white">
      <tr>
        <th class="py-4 px-6 text-left font-heading font-semibold">Características</th>
        <th class="py-4 px-6 text-center font-heading font-semibold">Starter</th>
        <th class="py-4 px-6 text-center font-heading font-semibold bg-azul-electrico">Growth</th>
        <th class="py-4 px-6 text-center font-heading font-semibold">Elite</th>
      </tr>
    </thead>
    <tbody>
      {features.map((feature, index) => (
        <tr class:list={[index % 2 === 0 ? 'bg-gris-claro/30' : 'bg-white']}>
          <td class="py-4 px-6 font-medium text-azul-profundo">
            {feature.name}
          </td>
          <td class="py-4 px-6 text-center">
            {typeof feature.starter === 'boolean' ? (
              feature.starter ? (
                <Check className="inline text-green-500" size={20} />
              ) : (
                <X className="inline text-red-400" size={20} />
              )
            ) : (
              <span class="text-gris-azulado">{feature.starter}</span>
            )}
          </td>
          <td class="py-4 px-6 text-center bg-celeste-tech/5">
            {typeof feature.growth === 'boolean' ? (
              feature.growth ? (
                <Check className="inline text-green-500" size={20} />
              ) : (
                <X className="inline text-red-400" size={20} />
              )
            ) : (
              <span class="text-azul-profundo font-semibold">{feature.growth}</span>
            )}
          </td>
          <td class="py-4 px-6 text-center">
            {typeof feature.elite === 'boolean' ? (
              feature.elite ? (
                <Check className="inline text-green-500" size={20} />
              ) : (
                <X className="inline text-red-400" size={20} />
              )
            ) : (
              <span class="text-gris-azulado">{feature.elite}</span>
            )}
          </td>
        </tr>
      ))}
    </tbody>
    <tfoot class="bg-gris-claro">
      <tr>
        <td class="py-6 px-6"></td>
        <td class="py-6 px-6 text-center">
          <a 
            href={formatWhatsAppLink(siteConfig.whatsapp, 'Hola! Me interesa contratar el Plan Starter. ¿Podrían brindarme más información?')}
            target="_blank"
            rel="noopener noreferrer"
            class="inline-block px-6 py-2 border-2 border-azul-electrico text-azul-electrico rounded-lg hover:bg-azul-electrico hover:text-white transition-all font-button font-medium"
          >
            Elegir Starter
          </a>
        </td>
        <td class="py-6 px-6 text-center">
          <a 
            href={formatWhatsAppLink(siteConfig.whatsapp, 'Hola! Me interesa contratar el Plan Growth. ¿Podrían brindarme más información?')}
            target="_blank"
            rel="noopener noreferrer"
            class="inline-block px-6 py-2 bg-azul-electrico text-white rounded-lg hover:bg-azul-electrico/90 transition-all font-button font-medium shadow-lg"
          >
            Elegir Growth
          </a>
        </td>
        <td class="py-6 px-6 text-center">
          <a 
            href={formatWhatsAppLink(siteConfig.whatsapp, 'Hola! Me interesa contratar el Plan Elite. ¿Podrían brindarme más información?')}
            target="_blank"
            rel="noopener noreferrer"
            class="inline-block px-6 py-2 border-2 border-azul-electrico text-azul-electrico rounded-lg hover:bg-azul-electrico hover:text-white transition-all font-button font-medium"
          >
            Elegir Elite
          </a>
        </td>
      </tr>
    </tfoot>
  </table>
</div>
